"use strict";(self.webpackChunkmarketing_backstage_test=self.webpackChunkmarketing_backstage_test||[]).push([[587],{15587:function(e,r,a){a.r(r),a.d(r,{default:function(){return ce}});var n,i=a(29439),t=a(72791),l=a.t(t,2),o=a(11087),s=a(96578),d=a(86194),c=a(13967),p=a(68870),m=a(68096),u=a(94925),x=a(15712),h=a(39891),g=a(36151),f=a(20890),b=a(11607),Z=a(4834),j=a(5403),v=a(95450),y=a(74165),C=a(15861),w=a(1413),_=a(48550),S=a(14527),k=a(63466),N=a(13400),R=a(47071),W=a(92506),P=a(81724),I=(a(32899),a(86586)),E=a(20382),B=a(21996),q=a(4942),A=(n={"\u53f0\u5317\u5e02":["\u4e2d\u6b63\u5340","\u5927\u540c\u5340","\u4e2d\u5c71\u5340","\u842c\u83ef\u5340","\u4fe1\u7fa9\u5340","\u677e\u5c71\u5340","\u5927\u5b89\u5340","\u5357\u6e2f\u5340","\u5317\u6295\u5340","\u5167\u6e56\u5340","\u58eb\u6797\u5340","\u6587\u5c71\u5340"],"\u65b0\u5317\u5e02":["\u677f\u6a4b\u5340","\u65b0\u838a\u5340","\u6cf0\u5c71\u5340","\u6797\u53e3\u5340","\u6de1\u6c34\u5340","\u91d1\u5c71\u5340","\u516b\u91cc\u5340","\u842c\u91cc\u5340","\u77f3\u9580\u5340","\u4e09\u829d\u5340","\u745e\u82b3\u5340","\u6c50\u6b62\u5340","\u5e73\u6eaa\u5340","\u8ca2\u5bee\u5340","\u96d9\u6eaa\u5340","\u6df1\u5751\u5340","\u77f3\u7887\u5340","\u65b0\u5e97\u5340","\u576a\u6797\u5340","\u70cf\u4f86\u5340","\u4e2d\u548c\u5340","\u6c38\u548c\u5340","\u571f\u57ce\u5340","\u4e09\u5cfd\u5340","\u6a39\u6797\u5340","\u9daf\u6b4c\u5340","\u4e09\u91cd\u5340","\u8606\u6d32\u5340","\u4e94\u80a1\u5340"],"\u57fa\u9686\u5e02":["\u4ec1\u611b\u5340","\u4e2d\u6b63\u5340","\u4fe1\u7fa9\u5340","\u4e2d\u5c71\u5340","\u5b89\u6a02\u5340","\u6696\u6696\u5340","\u4e03\u5835\u5340"],"\u6843\u5712\u5e02":["\u6843\u5712\u5340","\u4e2d\u58e2\u5340","\u5e73\u93ae\u5340","\u516b\u5fb7\u5340","\u694a\u6885\u5340","\u8606\u7af9\u5340","\u9f9c\u5c71\u5340","\u9f8d\u6f6d\u5340","\u5927\u6eaa\u5340","\u5927\u5712\u5340","\u89c0\u97f3\u5340","\u65b0\u5c4b\u5340","\u5fa9\u8208\u5340"],"\u65b0\u7af9\u7e23":["\u7af9\u5317\u5e02","\u7af9\u6771\u93ae","\u65b0\u57d4\u93ae","\u95dc\u897f\u93ae","\u5ce8\u7709\u9109","\u5bf6\u5c71\u9109","\u5317\u57d4\u9109","\u6a6b\u5c71\u9109","\u828e\u6797\u9109","\u6e56\u53e3\u9109","\u65b0\u8c50\u9109","\u5c16\u77f3\u9109","\u4e94\u5cf0\u9109"],"\u82d7\u6817\u7e23":["\u82d7\u6817\u5e02","\u901a\u9704\u93ae","\u82d1\u88e1\u93ae","\u7af9\u5357\u93ae","\u982d\u4efd\u93ae","\u5f8c\u9f8d\u93ae","\u5353\u862d\u93ae","\u897f\u6e56\u9109","\u982d\u5c4b\u9109","\u516c\u9928\u9109","\u9285\u947c\u9109","\u4e09\u7fa9\u9109","\u9020\u6a4b\u9109","\u4e09\u7063\u9109","\u5357\u5e84\u9109","\u5927\u6e56\u9109","\u7345\u6f6d\u9109","\u6cf0\u5b89\u9109"],"\u53f0\u4e2d\u5e02":["\u4e2d\u5340","\u6771\u5340","\u5357\u5340","\u897f\u5340","\u5317\u5340","\u5317\u5c6f\u5340","\u897f\u5c6f\u5340","\u5357\u5c6f\u5340","\u592a\u5e73\u5340","\u5927\u91cc\u5340","\u9727\u5cf0\u5340","\u70cf\u65e5\u5340","\u8c50\u539f\u5340","\u540e\u91cc\u5340","\u77f3\u5ca1\u5340","\u6771\u52e2\u5340","\u548c\u5e73\u5340","\u65b0\u793e\u5340","\u6f6d\u5b50\u5340","\u5927\u96c5\u5340","\u795e\u5ca1\u5340","\u5927\u809a\u5340","\u6c99\u9e7f\u5340","\u9f8d\u4e95\u5340","\u68a7\u68f2\u5340","\u6e05\u6c34\u5340","\u5927\u7532\u5340","\u5916\u57d4\u5340","\u5927\u5b89\u5340"],"\u5f70\u5316\u7e23":["\u5f70\u5316\u5e02","\u54e1\u6797\u5e02","\u548c\u7f8e\u93ae","\u9e7f\u6e2f\u93ae","\u6eaa\u6e56\u93ae","\u4e8c\u6797\u93ae","\u7530\u4e2d\u93ae","\u5317\u6597\u93ae","\u82b1\u58c7\u9109","\u82ac\u5712\u9109","\u5927\u6751\u9109","\u6c38\u9756\u9109","\u4f38\u6e2f\u9109","\u7dda\u897f\u9109","\u798f\u8208\u9109","\u79c0\u6c34\u9109","\u57d4\u5fc3\u9109","\u57d4\u9e7d\u9109","\u5927\u57ce\u9109","\u82b3\u82d1\u9109","\u7af9\u5858\u9109","\u793e\u982d\u9109","\u4e8c\u6c34\u9109","\u7530\u5c3e\u9109","\u57e4\u982d\u9109","\u6eaa\u5dde\u9109"],"\u5357\u6295\u7e23":["\u5357\u6295\u5e02","\u57d4\u91cc\u93ae","\u8349\u5c6f\u93ae","\u7af9\u5c71\u93ae","\u96c6\u96c6\u93ae","\u540d\u9593\u9109","\u9e7f\u8c37\u9109","\u4e2d\u5bee\u9109","\u9b5a\u6c60\u9109","\u570b\u59d3\u9109","\u6c34\u91cc\u9109","\u4fe1\u7fa9\u9109","\u4ec1\u611b\u9109"]},(0,q.Z)(n,"\u5f70\u5316\u7e23",["\u5f70\u5316\u5e02","\u54e1\u6797\u93ae","\u548c\u7f8e\u93ae","\u9e7f\u6e2f\u93ae","\u6eaa\u6e56\u93ae","\u4e8c\u6797\u93ae","\u7530\u4e2d\u93ae","\u5317\u6597\u93ae","\u82b1\u58c7\u9109","\u82ac\u5712\u9109","\u5927\u6751\u9109","\u6c38\u9756\u9109","\u4f38\u6e2f\u9109","\u7dda\u897f\u9109","\u798f\u8208\u9109","\u79c0\u6c34\u9109","\u57d4\u5fc3\u9109","\u57d4\u9e7d\u9109","\u5927\u57ce\u9109","\u82b3\u82d1\u9109","\u7af9\u5858\u9109","\u793e\u982d\u9109","\u4e8c\u6c34\u9109","\u7530\u5c3e\u9109","\u57e4\u982d\u9109","\u6eaa\u5dde\u9109"]),(0,q.Z)(n,"\u96f2\u6797\u7e23",["\u6597\u516d\u5e02","\u6597\u5357\u93ae","\u864e\u5c3e\u93ae","\u897f\u87ba\u93ae","\u571f\u5eab\u93ae","\u5317\u6e2f\u93ae","\u83bf\u6850\u9109","\u6797\u5167\u9109","\u53e4\u5751\u9109","\u5927\u57e4\u9109","\u5d19\u80cc\u9109","\u4e8c\u5d19\u9109","\u9ea5\u5bee\u9109","\u53f0\u897f\u9109","\u6771\u52e2\u9109","\u8912\u5fe0\u9109","\u56db\u6e56\u9109","\u53e3\u6e56\u9109","\u6c34\u6797\u9109","\u5143\u9577\u9109"]),(0,q.Z)(n,"\u5609\u7fa9\u7e23",["\u592a\u4fdd\u5e02","\u6734\u5b50\u5e02","\u5e03\u888b\u93ae","\u5927\u6797\u93ae","\u6c11\u96c4\u9109","\u6eaa\u53e3\u9109","\u65b0\u6e2f\u9109","\u516d\u8173\u9109","\u6771\u77f3\u9109","\u7fa9\u7af9\u9109","\u9e7f\u8349\u9109","\u6c34\u4e0a\u9109","\u4e2d\u57d4\u9109","\u7af9\u5d0e\u9109","\u6885\u5c71\u9109","\u756a\u8def\u9109","\u5927\u57d4\u9109","\u963f\u91cc\u5c71\u9109"]),(0,q.Z)(n,"\u5609\u7fa9\u5e02",["\u6771\u5340","\u897f\u5340"]),(0,q.Z)(n,"\u53f0\u5357\u5e02",["\u4e2d\u897f\u5340","\u6771\u5340","\u5357\u5340","\u5317\u5340","\u5b89\u5e73\u5340","\u5b89\u5357\u5340","\u6c38\u5eb7\u5340","\u6b78\u4ec1\u5340","\u65b0\u5316\u5340","\u5de6\u93ae\u5340","\u7389\u4e95\u5340","\u6960\u897f\u5340","\u5357\u5316\u5340","\u4ec1\u5fb7\u5340","\u95dc\u5edf\u5340","\u9f8d\u5d0e\u5340","\u5b98\u7530\u5340","\u9ebb\u8c46\u5340","\u4f73\u91cc\u5340","\u897f\u6e2f\u5340","\u4e03\u80a1\u5340","\u5c07\u8ecd\u5340","\u5b78\u7532\u5340","\u5317\u9580\u5340","\u65b0\u71df\u5340","\u5f8c\u58c1\u5340","\u767d\u6cb3\u5340","\u6771\u5c71\u5340","\u516d\u7532\u5340","\u4e0b\u71df\u5340","\u67f3\u71df\u5340","\u9e7d\u6c34\u5340","\u5584\u5316\u5340","\u5927\u5167\u5340","\u5c71\u4e0a\u5340","\u65b0\u5e02\u5340","\u5b89\u5b9a\u5340"]),(0,q.Z)(n,"\u9ad8\u96c4\u5e02",["\u6960\u6893\u5340","\u5de6\u71df\u5340","\u9f13\u5c71\u5340","\u4e09\u6c11\u5340","\u9e7d\u57d5\u5340","\u524d\u91d1\u5340","\u65b0\u8208\u5340","\u82d3\u96c5\u5340","\u524d\u93ae\u5340","\u5c0f\u6e2f\u5340","\u65d7\u6d25\u5340","\u9cf3\u5c71\u5340","\u5927\u5bee\u5340","\u9ce5\u677e\u5340","\u6797\u5712\u5340","\u4ec1\u6b66\u5340","\u5927\u6a39\u5340","\u5927\u793e\u5340","\u5ca1\u5c71\u5340","\u8def\u7af9\u5340","\u6a4b\u982d\u5340","\u6893\u5b98\u5340","\u5f4c\u9640\u5340","\u6c38\u5b89\u5340","\u71d5\u5de2\u5340","\u7530\u5bee\u5340","\u963f\u84ee\u5340","\u8304\u8423\u5340","\u6e56\u5167\u5340","\u65d7\u5c71\u5340","\u7f8e\u6fc3\u5340","\u5167\u9580\u5340","\u6749\u6797\u5340","\u7532\u4ed9\u5340","\u516d\u9f9c\u5340","\u8302\u6797\u5340","\u6843\u6e90\u5340","\u90a3\u746a\u590f\u5340"]),(0,q.Z)(n,"\u5c4f\u6771\u7e23",["\u5c4f\u6771\u5e02","\u6f6e\u5dde\u93ae","\u6771\u6e2f\u93ae","\u6046\u6625\u93ae","\u842c\u4e39\u9109","\u9577\u6cbb\u9109","\u9e9f\u6d1b\u9109","\u4e5d\u5982\u9109","\u91cc\u6e2f\u9109","\u9e7d\u57d4\u9109","\u9ad8\u6a39\u9109","\u842c\u5dd2\u9109","\u5167\u57d4\u9109","\u7af9\u7530\u9109","\u65b0\u57e4\u9109","\u678b\u5bee\u9109","\u65b0\u5712\u9109","\u5d01\u9802\u9109","\u6797\u908a\u9109","\u5357\u5dde\u9109","\u4f73\u51ac\u9109","\u7409\u7403\u9109","\u8eca\u57ce\u9109","\u6eff\u5dde\u9109","\u678b\u5c71\u9109","\u9727\u53f0\u9109","\u746a\u5bb6\u9109","\u6cf0\u6b66\u9109","\u4f86\u7fa9\u9109","\u6625\u65e5\u9109","\u7345\u5b50\u9109","\u7261\u4e39\u9109","\u4e09\u5730\u9580\u9109"]),(0,q.Z)(n,"\u5b9c\u862d\u7e23",["\u5b9c\u862d\u5e02","\u7f85\u6771\u93ae","\u8607\u6fb3\u93ae","\u982d\u57ce\u93ae","\u7901\u6eaa\u9109","\u58ef\u570d\u9109","\u54e1\u5c71\u9109","\u51ac\u5c71\u9109","\u4e94\u7d50\u9109","\u4e09\u661f\u9109","\u5927\u540c\u9109","\u5357\u6fb3\u9109"]),(0,q.Z)(n,"\u82b1\u84ee\u7e23",["\u82b1\u84ee\u5e02","\u9cf3\u6797\u93ae","\u7389\u91cc\u93ae","\u65b0\u57ce\u9109","\u5409\u5b89\u9109","\u58fd\u8c50\u9109","\u79c0\u6797\u9109","\u5149\u5fa9\u9109","\u8c50\u6ff1\u9109","\u745e\u7a57\u9109","\u842c\u69ae\u9109","\u5bcc\u91cc\u9109","\u5353\u6eaa\u9109"]),(0,q.Z)(n,"\u53f0\u6771\u7e23",["\u53f0\u6771\u5e02","\u6210\u529f\u93ae","\u95dc\u5c71\u93ae","\u9577\u6ff1\u9109","\u6d77\u7aef\u9109","\u6c60\u4e0a\u9109","\u6771\u6cb3\u9109","\u9e7f\u91ce\u9109","\u5ef6\u5e73\u9109","\u5351\u5357\u9109","\u91d1\u5cf0\u9109","\u5927\u6b66\u9109","\u9054\u4ec1\u9109","\u7da0\u5cf6\u9109","\u862d\u5dbc\u9109","\u592a\u9ebb\u91cc\u9109"]),(0,q.Z)(n,"\u6f8e\u6e56\u7e23",["\u99ac\u516c\u5e02","\u6e56\u897f\u9109","\u767d\u6c99\u9109","\u897f\u5dbc\u9109","\u671b\u5b89\u9109","\u4e03\u7f8e\u9109"]),(0,q.Z)(n,"\u91d1\u9580\u7e23",["\u91d1\u57ce\u93ae","\u91d1\u6e56\u93ae","\u91d1\u6c99\u93ae","\u91d1\u5be7\u9109","\u70c8\u5dbc\u9109","\u70cf\u5775\u9109"]),(0,q.Z)(n,"\u9023\u6c5f\u7e23",["\u5357\u7aff\u9109","\u5317\u7aff\u9109","\u8392\u5149\u9109","\u6771\u5f15\u9109"]),n),L=a(49152),U=a(62144),T=a(94810),z=a(29569),M=a(3710),F=a(67381),D=a(98551),V=a(59434),G=a(39230),$=a(80184),O=P.Ry().shape({name:P.Z_().required("required"),status:P.Z_().required("required"),brandId:P.Z_().required("required"),brandName:P.Z_().required("required"),principalName:P.Z_().required("required"),principalLineUrl:P.Z_().required("required"),principalEmail:P.Z_().email("invalid email")});function H(e){var r=e.props,a=(0,V.v9)((function(e){return e.entity})).entityName,n=(0,G.$G)().t,l=(0,c.Z)(),o=(0,b.TV)(l.palette.mode),Z=(0,t.useState)(!1),j=(0,i.Z)(Z,2),v=j[0],P=j[1],q=(0,t.useState)("disable"),H=(0,i.Z)(q,2),J=H[0],Q=H[1],K=function(e){Q(e.target.value)},X=(0,t.useState)(!1),Y=(0,i.Z)(X,2),ee=Y[0],re=Y[1],ae=function(){return re((function(e){return!e}))},ne=function(e){e.preventDefault()},ie=n("update"),te=n("confirm"),le=n("delete"),oe=(n("remove"),n("ban")),se=(0,t.useState)(""),de=(0,i.Z)(se,2),ce=de[0],pe=de[1],me=(0,t.useState)([]),ue=(0,i.Z)(me,2),xe=ue[0],he=ue[1],ge=(0,t.useState)(""),fe=(0,i.Z)(ge,2),be=fe[0],Ze=fe[1],je=function(e){pe(e.target.value),he(A[e.target.value]),Ze("")},ve=function(e){Ze(e.target.value)},ye=(0,t.useState)(""),Ce=(0,i.Z)(ye,2),we=Ce[0],_e=Ce[1],Se=(0,t.useState)({address:"",coordinates:{lat:0,lng:120}}),ke=(0,i.Z)(Se,2),Ne=ke[0],Re=Ne.address,We=Ne.coordinates,Pe=ke[1],Ie=(0,t.useState)({id:-1,brandId:-1,brandName:"",name:"",intro:"",status:"",principalName:"",principalAccount:"",principalPassword:"",principalLineUrl:"https://lin.ee/",principalEmail:""}),Ee=(0,i.Z)(Ie,2),Be=Ee[0],qe=Ee[1],Ae=(0,I.t)(d.I2),Le=(0,i.Z)(Ae,2),Ue=Le[0],Te=Le[1],ze=Te.loading,Me=Te.error,Fe=Te.data;(0,t.useEffect)((function(){Fe&&(console.log("REMOVE SUCCESS"),window.location.reload())}),[Fe]);var De=(0,I.t)(d.mU),Ve=(0,i.Z)(De,2),Ge=Ve[0],$e=Ve[1],Oe=($e.loading,$e.error,$e.data);(0,t.useEffect)((function(){Oe&&(window.location.reload(),console.log("UPDATE SUCCESS"))}),[Oe]);var He=(0,s.a)(d.on,{variables:{args:[{id:r.id}]}}),Je=(He.loading,He.error,He.data);(0,t.useEffect)((function(){if(Je){var e=(0,T.Hu)(Je.getStore[0]);qe({id:r.id,status:e.status.name,name:e.name,intro:e.intro,brandId:e.brand.id,brandName:e.brand.name,principalName:e.principal.name,principalAccount:e.principal.account,principalEmail:e.principal.email,principalPassword:"",principalLineUrl:e.principal.lineUrl}),null===Je.getStore[0].cover&&"null"===Je.getStore[0].cover||or(Je.getStore[0].cover),pe(Je.getStore[0].location.city),he(A[Je.getStore[0].location.city]),Ze(Je.getStore[0].location.district),Pe((function(e){return(0,w.Z)((0,w.Z)({},e),{},{address:Je.getStore[0].location.address})})),"banned"!==Je.getStore[0].status.name&&Q(Je.getStore[0].status.name)}}),[Je]);var Qe=function(){var e=(0,C.Z)((0,y.Z)().mark((function e(r){var a,n,i,t,l;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.NU)(r);case 2:return a=e.sent,n=a[0].address_components[0].long_name+a[0].address_components[1].long_name,e.next=6,(0,E.WV)(a[0]);case 6:i=e.sent,t=a[0].address_components[4].long_name,l=a[0].address_components[3].long_name,_e(r),Pe({address:n,coordinates:i}),t in A&&(pe(t),he(A[t]),Ze(l)),console.log("city"+t+"district"+l+"Coordinate:"+We.lat+","+We.lng);case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Ke=function(){window.confirm("Are you sure you want to delete this store?")&&Ue({variables:{args:[{id:r.id}]}})},Xe=(0,I.t)(d.h4),Ye=(0,i.Z)(Xe,2),er=Ye[0],rr=Ye[1],ar=(rr.loading,rr.error,rr.data);(0,t.useEffect)((function(){ar&&window.location.reload()}),[ar]);var nr=function(e){window.confirm("Are you sure you want to unban this store?")&&(er({variables:{args:[{id:r.id}],reason:"null"}}),console.log("unbaned"))},ir=(0,t.useState)(L.uI),tr=(0,i.Z)(ir,2),lr=tr[0],or=tr[1],sr=function(e){or(e)},dr=function(){P(!v)};return v?document.body.classList.add("active-modal"):document.body.classList.remove("active-modal"),ze?(0,$.jsx)(F.Z,{}):Me?(0,$.jsx)(D.Z,{}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(g.Z,{onClick:dr,className:"btn-modal",sx:{color:o.primary[100],border:"1px solid #111",borderColor:o.blueAccent[100]},children:ie}),v&&(0,$.jsxs)(p.Z,{className:"modal",children:[(0,$.jsx)(p.Z,{onClick:dr,className:"overlay"}),(0,$.jsx)(p.Z,{className:"modal-content",backgroundColor:o.primary[500],children:(0,$.jsx)(p.Z,{m:"20px",children:(0,$.jsx)(W.J9,{onSubmit:function(e){var r={args:[{id:e.id}],name:e.name,cover:lr,location:{city:ce,district:be,address:Re,description:"NONE"},principal:{name:e.principalName,lineUrl:e.principalLineUrl}};""!==e.intro&&(r.intro=e.intro),""!==e.principalEmail&&(r.principal.email=e.principalEmail),0!==We.lat&&120!==We.lng&&(r.location.coordinate={latitude:We.lat,longitude:We.lng}),""!==e.principalPassword&&(r.principal.password=e.principalPassword),"banned"!==Be.status&&(r.statusId=J),Ge({variables:r})},initialValues:Be,validationSchema:O,children:function(e){var i=e.values,t=e.errors,l=e.touched,s=e.handleBlur,d=e.handleChange,c=e.handleSubmit;return(0,$.jsxs)("form",{onSubmit:c,children:[(0,$.jsxs)(p.Z,{children:[(0,$.jsxs)(p.Z,{display:"flex",m:"1rem 0",children:[(0,$.jsxs)(p.Z,{width:"35%",display:"flex",flexDirection:"column",justifyContent:"center",children:[(0,$.jsx)(f.Z,{variant:"h2",sx:{mb:"10px",fontSize:"2rem",fontWeight:"600",color:"white"},children:ie}),(0,$.jsx)(p.Z,{textAlign:"center",display:"flex",children:"disable"===Be.status?(0,$.jsx)(f.Z,{variant:"h5",color:o.primary[100],children:n("disable")}):"banned"===Be.status?(0,$.jsx)(f.Z,{variant:"h5",color:o.redAccent[500],children:n("banned")}):(0,$.jsx)(f.Z,{variant:"h5",color:o.greenAccent[500],children:n("normal")})})]}),(0,$.jsx)(p.Z,{width:"65%",children:(0,$.jsx)(U.Z,{handleSuccess:sr,imagePlaceHolder:(0,T.q8)(lr,"cover"),type:"store"})})]}),(0,$.jsxs)(p.Z,{display:"flex",justifyContent:"space-between",children:[(0,$.jsx)(_.Z,{className:"modal_input_textfield",fullWidth:!0,variant:"filled",type:"text",label:n("store_name"),onBlur:s,onChange:d,value:i.name,name:"name",error:!!l.name&&!!t.name,helperText:l.name&&t.name,sx:{margin:"0 1rem 1rem 0",backgroundColor:o.primary[400],borderRadius:"5px",color:"black"}}),(0,$.jsx)(_.Z,{className:"modal_input_textfield",fullWidth:!0,variant:"filled",type:"text",label:"".concat(n("intro")," ").concat(n("optional")),onBlur:s,onChange:d,value:i.intro,name:"intro",error:!!l.intro&&!!t.intro,helperText:l.intro&&t.intro,sx:{margin:"0 1rem 1rem 0",backgroundColor:o.primary[400],borderRadius:"5px",color:"black"}}),(0,$.jsxs)(m.Z,{sx:{minWidth:150},children:[(0,$.jsx)(u.Z,{id:"demo-simple-select-label",children:Be.status}),(0,$.jsxs)(x.Z,{disabled:"banned"===Be.status,sx:{borderRadius:"10px",background:o.primary[400]},labelId:"demo-simple-select-label",id:"demo-simple-select",value:J,label:"status",onChange:K,children:[(0,$.jsx)(h.Z,{value:"normal",children:n("normal")}),(0,$.jsx)(h.Z,{value:"disable",children:n("disable")})]})]})]}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",disabled:!0,type:"text",label:n("brand_id"),onBlur:s,onChange:d,value:i.brandId,name:"brandId",error:!!l.brandId&&!!t.brandId,helperText:l.brandId&&t.brandId,sx:{marginBottom:"1rem",mr:"1rem",backgroundColor:o.primary[400],borderRadius:"5px"}}),(0,$.jsx)(_.Z,{fullWidth:!0,disabled:!0,variant:"filled",type:"text",label:n("brand_name"),onBlur:s,onChange:d,value:i.brandName,name:"brandName",error:!!l.brandName&&!!t.brandName,helperText:l.brandName&&t.brandName,sx:{marginBottom:"1rem",backgroundColor:o.primary[400],borderRadius:"5px"}})]}),(0,$.jsx)(E.ZP,{className:"places_autocomplete",value:we,onChange:_e,onSelect:Qe,children:function(e){var r=e.getInputProps,a=e.suggestions,i=e.getSuggestionItemProps,t=e.loading;return(0,$.jsxs)("div",{children:[(0,$.jsx)(_.Z,(0,w.Z)({className:"modal_input_textfield",fullWidth:!0,label:n("search_location"),variant:"filled",type:"text",sx:{mb:"1rem",backgroundColor:o.primary[400],borderRadius:"5px",color:"black"}},r({placeholder:"\u641c\u7d22\u5e97\u9762\u5730\u9ede ...",className:"location-search-input"}))),(0,$.jsxs)("div",{className:"autocomplete-dropdown-container",children:[t&&(0,$.jsx)("div",{children:"Loading..."}),a.map((function(e){var r=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:o.primary[500],color:o.grey[300],cursor:"pointer",borderRadius:"5px",fontSize:"1rem",padding:"0.5rem",margin:"0.5rem"}:{backgroundColor:o.primary[400],color:o.grey[300],cursor:"pointer",borderRadius:"5px",fontSize:"1rem",padding:"0.5rem",margin:"0.5rem"};return(0,$.jsx)("div",(0,w.Z)((0,w.Z)({},i(e,{className:r,style:a})),{},{children:(0,$.jsx)("span",{children:e.description})}))}))]})]})}}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsxs)(m.Z,{sx:{minWidth:150,height:"100%"},children:[(0,$.jsx)(u.Z,{id:"demo-simple-select-label",children:n("county_filter")}),(0,$.jsx)(x.Z,{sx:{borderRadius:"10px",background:o.primary[400],height:"100%",width:"auto",mr:"1rem"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:ce,label:"cityFilter",onChange:je,required:!0,children:Object.keys(A).map((function(e,r){return(0,$.jsx)(h.Z,{value:e,children:e},"".concat(e,"-").concat(r))}))})]}),(0,$.jsxs)(m.Z,{sx:{minWidth:150,height:"100%"},children:[(0,$.jsx)(u.Z,{id:"demo-simple-select-label",children:n("district_filter")}),(0,$.jsx)(x.Z,{sx:{borderRadius:"10px",background:o.primary[400],height:"100%",width:"auto",mr:"1rem"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:be,label:"areaFilter",onChange:ve,required:!0,children:xe.map((function(e,r){return(0,$.jsx)(h.Z,{value:e,children:e},e)}))})]}),(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:n("address"),onBlur:s,onChange:d,value:Re,name:"address",required:!0,error:!!l.address&&!!t.address,helperText:l.address&&t.address,sx:{marginBottom:"1rem",backgroundColor:o.primary[400],borderRadius:"5px"}})]}),(0,$.jsxs)(p.Z,{display:"flex",justifyContent:"space-between",children:[(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:n("principal_name"),onBlur:s,onChange:d,value:i.principalName,name:"principalName",error:!!l.principalName&&!!t.principalName,helperText:l.principalName&&t.principalName,sx:{marginBottom:"1rem",mr:"1rem",backgroundColor:o.primary[400],borderRadius:"5px"}}),(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:n("principal_line"),onBlur:s,onChange:d,value:i.principalLineUrl,name:"principalLineUrl",error:!!l.principalLineUrl&&!!t.principalLineUrl,helperText:l.principalLineUrl&&t.principalLineUrl,sx:{margin:" 0 0 1rem 0",backgroundColor:o.primary[400],borderRadius:"5px"}})]}),(0,$.jsxs)(p.Z,{display:"flex",justifyContent:"space-between",children:[(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:n("principal_email"),onBlur:s,onChange:d,value:i.principalEmail,name:"principalEmail",error:!!l.principalEmail&&!!t.principalEmail,helperText:l.principalEmail&&t.principalEmail,sx:{margin:" 0 1rem 1rem 0",backgroundColor:o.primary[400],borderRadius:"5px"}}),(0,$.jsxs)(m.Z,{fullWidth:!0,variant:"filled",sx:{marginBottom:"1rem",backgroundColor:o.primary[400],borderRadius:"5px"},children:[(0,$.jsx)(u.Z,{htmlFor:"filled-adornment-password",children:"".concat(n("principal_password")," ").concat(n("optional"))}),(0,$.jsx)(S.Z,{onBlur:s,onChange:d,value:i.principalPassword,name:"principalPassword",error:!!l.principalPassword&&!!t.principalPassword,type:ee?"text":"password",endAdornment:(0,$.jsx)(k.Z,{position:"end",children:(0,$.jsx)(N.Z,{"aria-label":"toggle password visibility",onClick:ae,onMouseDown:ne,edge:"end",children:ee?(0,$.jsx)(z.Z,{}):(0,$.jsx)(M.Z,{})})})}),(0,$.jsx)(R.Z,{error:!!l.principalPassword&&!!t.principalPassword,children:l.principalPassword&&t.principalPassword})]})]})]}),(0,$.jsxs)(p.Z,{display:"flex",justifyContent:"center",children:[(0,$.jsx)(g.Z,{onClick:Ke,variant:"contained",sx:{minWidth:"100px",padding:".5rem 1.5rem",margin:"0 1rem",borderRadius:"10px",border:"2px solid #ff2f00"},children:(0,$.jsx)(f.Z,{variant:"h5",sx:{textAlign:"center",fontSize:".9rem",color:"white"},children:le})}),"company"===a?"banned"===i.status?(0,$.jsx)(g.Z,{onClick:nr,id:i.id,variant:"contained",sx:{backgroundColor:o.primary[400],minWidth:"100px",padding:".5rem 1.5rem",margin:"0 1rem",borderRadius:"10px",border:"2px solid #fff"},children:(0,$.jsx)(f.Z,{variant:"h5",sx:{textAlign:"center",fontSize:".9rem",color:"white"},children:oe})}):(0,$.jsx)(B.Z,{props:{type:"store",id:r.id}}):null,(0,$.jsx)(g.Z,{type:"submit",color:"success",variant:"contained",sx:{minWidth:"100px",padding:".5rem 1.5rem",margin:"0 1rem",borderRadius:"10px",background:o.grey[100]},children:(0,$.jsx)(f.Z,{variant:"h5",sx:{textAlign:"center",fontSize:".9rem",color:o.grey[700]},children:te})})]})]})}})})})]})]})}var J=a(69120),Q=a(33073),K=a(40162);function X(e,r,a,n,l){var o="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,s=t.useState((function(){return l&&o?a(e).matches:n?n(e).matches:r})),d=(0,i.Z)(s,2),c=d[0],p=d[1];return(0,K.Z)((function(){var r=!0;if(o){var n=a(e),i=function(){r&&p(n.matches)};return i(),n.addListener(i),function(){r=!1,n.removeListener(i)}}}),[e,a,o]),c}var Y=l.useSyncExternalStore;function ee(e,r,a,n){var l=t.useCallback((function(){return r}),[r]),o=t.useMemo((function(){if(null!==n){var r=n(e).matches;return function(){return r}}return l}),[l,e,n]),s=t.useMemo((function(){if(null===a)return[l,function(){return function(){}}];var r=a(e);return[function(){return r.matches},function(e){return r.addListener(e),function(){r.removeListener(e)}}]}),[l,a,e]),d=(0,i.Z)(s,2),c=d[0],p=d[1];return Y(p,c,o)}function re(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,J.Z)(),n="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,i=(0,Q.Z)({name:"MuiUseMediaQuery",props:r,theme:a}),t=i.defaultMatches,l=void 0!==t&&t,o=i.matchMedia,s=void 0===o?n?window.matchMedia:null:o,d=i.ssrMatchMedia,c=void 0===d?null:d,p=i.noSsr;var m="function"===typeof e?e(a):e;m=m.replace(/^@media( ?)/m,"");var u=void 0!==Y?ee:X,x=u(m,l,s,c,p);return x}var ae=P.Ry().shape({name:P.Z_().required("required"),principalName:P.Z_().required("required"),principalAccount:P.Z_().required("required"),principalPassword:P.Z_().required("required").matches(/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d_!@#]{6,}$/),principalLineUrl:P.Z_().required("required"),principalEmail:P.Z_().email("invalid email")});function ne(){re("(min-width:600px)");var e=(0,G.$G)().t,r=(0,c.Z)(),a=(0,b.TV)(r.palette.mode),n=(0,t.useState)(!1),l=(0,i.Z)(n,2),o=l[0],Z=l[1],j=(0,t.useState)(!1),v=(0,i.Z)(j,2),P=v[0],B=v[1],q=function(){return B((function(e){return!e}))},L=function(e){e.preventDefault()},F=(0,t.useState)({brandId:"null",brandName:"null"}),D=(0,i.Z)(F,2),V=D[0],O=V.brandId,H=V.brandName,J=D[1],Q=e("create_store"),K=e("create"),X=(e("delete"),e("remove"),e("ban"),(0,t.useState)("")),Y=(0,i.Z)(X,2),ee=Y[0],ne=Y[1],ie=(0,t.useState)([]),te=(0,i.Z)(ie,2),le=te[0],oe=te[1],se=(0,t.useState)(""),de=(0,i.Z)(se,2),ce=de[0],pe=de[1],me=function(e){ne(e.target.value),oe(A[e.target.value]),pe("")},ue=function(e){pe(e.target.value)},xe=(0,t.useState)(""),he=(0,i.Z)(xe,2),ge=he[0],fe=he[1],be=(0,t.useState)({address:"",coordinates:{lat:0,lng:120}}),Ze=(0,i.Z)(be,2),je=Ze[0],ve=je.address,ye=je.coordinates,Ce=Ze[1],we=function(){var e=(0,C.Z)((0,y.Z)().mark((function e(r){var a,n,i,t,l;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.NU)(r);case 2:return a=e.sent,n=a[0].address_components[0].long_name+a[0].address_components[1].long_name,e.next=6,(0,E.WV)(a[0]);case 6:i=e.sent,t=a[0].address_components[4].long_name,l=a[0].address_components[3].long_name,fe(r),Ce({address:n,coordinates:i}),t in A&&(ne(t),oe(A[t]),pe(l)),console.log("city"+t+"district"+l+"Coordinate:"+ye.lat+","+ye.lng);case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),_e=(0,s.a)(d.wh),Se=(_e.loading,_e.error,_e.data),ke=(0,t.useState)(""),Ne=(0,i.Z)(ke,2),Re=Ne[0],We=Ne[1],Pe=(0,t.useState)([]),Ie=(0,i.Z)(Pe,2),Ee=Ie[0],Be=Ie[1];(0,t.useEffect)((function(){Se&&Be(Se.managerGetBrands)}),[Se]);var qe=function(e){var r=e.target.value,a=Ee.find((function(e){return e.id===r}));a&&(We(r),J({brandId:r,brandName:a.name}))},Ae=(0,I.t)(d.rz),Le=(0,i.Z)(Ae,2),Ue=Le[0],Te=Le[1],ze=(Te.loading,Te.error,Te.data);(0,t.useEffect)((function(){ze&&window.location.reload()}),[ze]);var Me=(0,t.useState)(""),Fe=(0,i.Z)(Me,2),De=Fe[0],Ve=Fe[1],Ge=function(e){Ve(e)},$e=function(){Z(!o)};return o?document.body.classList.add("active-modal"):document.body.classList.remove("active-modal"),(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(g.Z,{onClick:$e,className:"btn-modal",sx:{color:a.primary[100],border:"1px solid #111",borderColor:a.blueAccent[100]},children:Q}),o&&(0,$.jsxs)(p.Z,{className:"modal",children:[(0,$.jsx)(p.Z,{onClick:$e,className:"overlay"}),(0,$.jsx)(p.Z,{className:"modal-content",backgroundColor:a.primary[500],children:(0,$.jsx)(p.Z,{m:"20px",children:(0,$.jsx)(W.J9,{onSubmit:function(e){var r={args:[{id:O}],brandId:O,name:e.name,cover:De,location:{city:ee,district:ce,address:ve,coordinate:{latitude:ye.lat,longitude:ye.lng}},principal:{name:e.principalName,account:e.principalAccount,password:e.principalPassword,lineUrl:e.principalLineUrl}};""!==e.intro&&(r.intro=e.intro),""!==e.principalEmail&&(r.principal.email=e.principalEmail),console.log(r),Ue({variables:r})},initialValues:{name:"",intro:"",principalName:"",principalAccount:"",principalPassword:"",principalLineUrl:"https://lin.ee/",principalEmail:""},validationSchema:ae,children:function(e){var r=e.values,n=e.errors,i=e.touched,t=e.handleBlur,l=e.handleChange,o=e.handleSubmit;return(0,$.jsxs)("form",{onSubmit:o,children:[(0,$.jsxs)(p.Z,{children:[(0,$.jsxs)(p.Z,{display:"flex",m:"1rem 0",children:[(0,$.jsx)(p.Z,{width:"35%",display:"flex",flexDirection:"column",justifyContent:"center",children:(0,$.jsx)(f.Z,{variant:"h2",sx:{textAlign:"left",fontSize:"2rem",fontWeight:"600",color:"white"},children:Q})}),(0,$.jsx)(p.Z,{width:"65%",children:(0,$.jsx)(U.Z,{handleSuccess:Ge,imagePlaceHolder:(0,T.q8)(De,"cover"),type:"store"})})]}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsx)(_.Z,{fullWidth:!0,disabled:!0,variant:"filled",type:"text",label:"\u54c1\u724cid",onBlur:t,onChange:l,value:O,name:"brandId",error:!!i.brandId&&!!n.brandId,helperText:i.brandId&&n.brandId,sx:{marginBottom:"1rem",mr:"1rem",backgroundColor:a.primary[400],borderRadius:"5px"}}),(0,$.jsx)(_.Z,{fullWidth:!0,disabled:!0,variant:"filled",type:"text",label:"\u54c1\u724c\u540d\u7a31",onBlur:t,onChange:l,value:H,name:"brandName",error:!!i.brandName&&!!n.brandName,helperText:i.brandName&&n.brandName,sx:{marginBottom:"1rem",mr:"1rem",backgroundColor:a.primary[400],borderRadius:"5px"}}),(0,$.jsxs)(m.Z,{sx:{minWidth:150,height:"100%"},children:[(0,$.jsx)(u.Z,{id:"demo-simple-select-label",children:"\u54c1\u724c\u904e\u6ffe"}),(0,$.jsx)(x.Z,{sx:{borderRadius:"10px",background:a.primary[400],height:"100%",width:"auto"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:Re,label:"brandListFilter",onChange:qe,required:!0,children:Ee.map((function(e,r){return(0,$.jsxs)(h.Z,{value:e.id,children:[e.id," - ",e.name]},"".concat(r))}))})]})]}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsx)(_.Z,{className:"modal_input_textfield",fullWidth:!0,variant:"filled",type:"text",label:"\u66b1\u7a31",onBlur:t,onChange:l,value:r.name,name:"name",error:!!i.name&&!!n.name,helperText:i.name&&n.name,sx:{margin:"0 1rem 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px",color:"black"}}),(0,$.jsx)(_.Z,{className:"modal_input_textfield",fullWidth:!0,variant:"filled",type:"text",label:"\u5e97\u9762\u4ecb\u7d39",onBlur:t,onChange:l,value:r.intro,name:"intro",error:!!i.intro&&!!n.intro,helperText:i.intro&&n.intro,sx:{margin:"0 0 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px",color:"black"}})]}),(0,$.jsx)(E.ZP,{className:"places_autocomplete",value:ge,onChange:fe,onSelect:we,children:function(e){var r=e.getInputProps,n=e.suggestions,i=e.getSuggestionItemProps,t=e.loading;return(0,$.jsxs)("div",{children:[(0,$.jsx)(_.Z,(0,w.Z)({className:"modal_input_textfield",fullWidth:!0,label:"\u641c\u7d22\u5e97\u9762\u5730\u9ede ...",variant:"filled",type:"text",sx:{margin:"1rem 0",backgroundColor:a.primary[400],borderRadius:"5px",color:"black"}},r({placeholder:"\u641c\u7d22\u5e97\u9762\u5730\u9ede ...",className:"location-search-input"}))),(0,$.jsxs)("div",{className:"autocomplete-dropdown-container",children:[t&&(0,$.jsx)("div",{children:"Loading..."}),n.map((function(e,r){var n=e.active?"suggestion-item--active":"suggestion-item",t=e.active?{backgroundColor:a.primary[500],color:a.grey[300],cursor:"pointer",borderRadius:"5px",fontSize:"1rem",padding:"0.5rem",margin:"0.5rem"}:{backgroundColor:a.primary[400],color:a.grey[300],cursor:"pointer",borderRadius:"5px",fontSize:"1rem",padding:"0.5rem",margin:"0.5rem"};return(0,$.jsx)("div",(0,w.Z)((0,w.Z)({},i(e,{className:n,style:t})),{},{children:(0,$.jsx)("span",{children:e.description})}),r)}))]})]})}}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsxs)(m.Z,{sx:{minWidth:150,height:"100%"},children:[(0,$.jsx)(u.Z,{id:"demo-simple-select-label",children:"\u7e23\u5e02\u904e\u6ffe"}),(0,$.jsx)(x.Z,{sx:{borderRadius:"10px",background:a.primary[400],height:"100%",width:"auto",mr:"1rem"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:ee,label:"cityFilter",onChange:me,required:!0,children:Object.keys(A).map((function(e,r){return(0,$.jsx)(h.Z,{value:e,children:e},"".concat(e,"-").concat(r))}))})]}),(0,$.jsxs)(m.Z,{sx:{minWidth:150,height:"100%"},children:[(0,$.jsx)(u.Z,{id:"demo-simple-select-label",children:"\u9109\u93ae\u904e\u6ffe"}),(0,$.jsx)(x.Z,{sx:{borderRadius:"10px",background:a.primary[400],height:"100%",width:"auto",mr:"1rem"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:ce,label:"areaFilter",onChange:ue,required:!0,children:le.map((function(e,r){return(0,$.jsx)(h.Z,{value:e,children:e},e)}))})]}),(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:"\u5e97\u9762\u5730\u5740",onBlur:t,onChange:l,value:ve,name:"address",required:!0,error:!!i.address&&!!n.address,helperText:i.address&&n.address,sx:{marginBottom:"1rem",backgroundColor:a.primary[400],borderRadius:"5px"}})]}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:"\u8ca0\u8cac\u4eba\u540d\u7a31",onBlur:t,onChange:l,value:r.principalName,name:"principalName",error:!!i.principalName&&!!n.principalName,helperText:i.principalName&&n.principalName,sx:{margin:" 0 1rem 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px"}}),(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:"\u8ca0\u8cac\u4eba\u8cec\u865f",onBlur:t,onChange:l,value:r.principalAccount,name:"principalAccount",error:!!i.principalAccount&&!!n.principalAccount,helperText:i.principalAccount&&n.principalAccount,sx:{margin:" 0 1rem 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px"}}),(0,$.jsxs)(m.Z,{fullWidth:!0,variant:"filled",sx:{marginBottom:"1rem",backgroundColor:a.primary[400],borderRadius:"5px"},children:[(0,$.jsx)(u.Z,{htmlFor:"filled-adornment-password",children:"\u8ca0\u8cac\u4eba\u5bc6\u78bc (\u4e0d\u5fc5\u8981)"}),(0,$.jsx)(S.Z,{onBlur:t,onChange:l,value:r.principalPassword,name:"principalPassword",error:!!i.principalPassword&&!!n.principalPassword,type:P?"text":"password",endAdornment:(0,$.jsx)(k.Z,{position:"end",children:(0,$.jsx)(N.Z,{"aria-label":"toggle password visibility",onClick:q,onMouseDown:L,edge:"end",children:P?(0,$.jsx)(z.Z,{}):(0,$.jsx)(M.Z,{})})})}),(0,$.jsx)(R.Z,{error:!!i.principalPassword&&!!n.principalPassword,children:i.principalPassword&&n.principalPassword})]})]}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:"\u8ca0\u8cac\u4eba\u4fe1\u7bb1 (\u9078\u586b)",onBlur:t,onChange:l,value:r.principalEmail,name:"principalEmail",error:!!i.principalEmail&&!!n.principalEmail,helperText:i.principalEmail&&n.principalEmail,sx:{margin:" 0 1rem 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px"}}),(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:"\u8ca0\u8cac\u4ebaline",onBlur:t,onChange:l,value:r.principalLineUrl,name:"principalLineUrl",error:!!i.principalLineUrl&&!!n.principalLineUrl,helperText:i.principalLineUrl&&n.principalLineUrl,sx:{margin:" 0 0 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px"}})]})]}),(0,$.jsx)(p.Z,{display:"flex",justifyContent:"center",children:(0,$.jsx)(p.Z,{display:"flex",justifyContent:"center",children:(0,$.jsx)("button",{className:"my-button",type:"submit",children:K})})})]})}})})})]})]})}var ie=a(92879),te=a(18345),le=a(25153),oe=P.Ry().shape({name:P.Z_().required("required"),principalName:P.Z_().required("required"),principalAccount:P.Z_().required("required"),principalPassword:P.Z_().required("required").matches(/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d_!@#]{6,}$/),principalLineUrl:P.Z_().required("required"),principalEmail:P.Z_().email("invalid email")});function se(){re("(min-width:600px)");var e=(0,G.$G)().t,r=(0,c.Z)(),a=(0,b.TV)(r.palette.mode),n=(0,t.useState)(!1),l=(0,i.Z)(n,2),o=l[0],s=l[1],d=(0,t.useState)(!1),Z=(0,i.Z)(d,2),j=Z[0],v=Z[1],P=function(){return v((function(e){return!e}))},B=function(e){e.preventDefault()},q=(0,t.useState)({brandId:"null",brandName:"null"}),L=(0,i.Z)(q,2),F=L[0],D=F.brandId,V=(F.brandName,L[1],e("create_store")),O=e("create"),H=(e("delete"),e("remove"),e("ban"),(0,t.useState)("")),J=(0,i.Z)(H,2),Q=J[0],K=J[1],X=(0,t.useState)([]),Y=(0,i.Z)(X,2),ee=Y[0],ae=Y[1],ne=(0,t.useState)(""),ie=(0,i.Z)(ne,2),te=ie[0],se=ie[1],de=function(e){K(e.target.value),ae(A[e.target.value]),se("")},ce=function(e){se(e.target.value)},pe=(0,t.useState)(""),me=(0,i.Z)(pe,2),ue=me[0],xe=me[1],he=(0,t.useState)({address:"",coordinates:{lat:0,lng:120}}),ge=(0,i.Z)(he,2),fe=ge[0],be=fe.address,Ze=fe.coordinates,je=ge[1],ve=function(){var e=(0,C.Z)((0,y.Z)().mark((function e(r){var a,n,i,t,l;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.NU)(r);case 2:return a=e.sent,n=a[0].address_components[0].long_name+a[0].address_components[1].long_name,e.next=6,(0,E.WV)(a[0]);case 6:i=e.sent,t=a[0].address_components[4].long_name,l=a[0].address_components[3].long_name,xe(r),je({address:n,coordinates:i}),t in A&&(K(t),ae(A[t]),se(l)),console.log("city"+t+"district"+l+"Coordinate:"+Ze.lat+","+Ze.lng);case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),ye=(0,I.t)(le.$F),Ce=(0,i.Z)(ye,2),we=Ce[0],_e=Ce[1],Se=(_e.loading,_e.error,_e.data);(0,t.useEffect)((function(){Se&&window.location.reload()}),[Se]);var ke=(0,t.useState)(""),Ne=(0,i.Z)(ke,2),Re=Ne[0],We=Ne[1],Pe=function(e){We(e)},Ie=function(){s(!o)};return o?document.body.classList.add("active-modal"):document.body.classList.remove("active-modal"),(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(g.Z,{onClick:Ie,className:"btn-modal",sx:{color:a.primary[100],border:"1px solid #111",borderColor:a.blueAccent[100]},children:V}),o&&(0,$.jsxs)(p.Z,{className:"modal",children:[(0,$.jsx)(p.Z,{onClick:Ie,className:"overlay"}),(0,$.jsx)(p.Z,{className:"modal-content",backgroundColor:a.primary[500],children:(0,$.jsx)(p.Z,{m:"20px",children:(0,$.jsx)(W.J9,{onSubmit:function(e){var r={args:[{id:D}],brandId:D,name:e.name,cover:Re,location:{city:Q,district:te,address:be,coordinate:{latitude:Ze.lat,longitude:Ze.lng}},principal:{name:e.principalName,account:e.principalAccount,password:e.principalPassword,lineUrl:e.principalLineUrl}};""!==e.intro&&(r.intro=e.intro),""!==e.principalEmail&&(r.principal.email=e.principalEmail),console.log(r),we({variables:r})},initialValues:{name:"",intro:"",principalName:"",principalAccount:"",principalPassword:"",principalLineUrl:"https://lin.ee/",principalEmail:""},validationSchema:oe,children:function(r){var n=r.values,i=r.errors,t=r.touched,l=r.handleBlur,o=r.handleChange,s=r.handleSubmit;return(0,$.jsxs)("form",{onSubmit:s,children:[(0,$.jsxs)(p.Z,{children:[(0,$.jsxs)(p.Z,{display:"flex",m:"1rem 0",children:[(0,$.jsx)(p.Z,{width:"35%",display:"flex",flexDirection:"column",justifyContent:"center",children:(0,$.jsx)(f.Z,{variant:"h2",sx:{textAlign:"left",fontSize:"2rem",fontWeight:"600",color:"white"},children:V})}),(0,$.jsx)(p.Z,{width:"65%",children:(0,$.jsx)(U.Z,{handleSuccess:Pe,imagePlaceHolder:(0,T.q8)(Re,"cover"),type:"store"})})]}),(0,$.jsx)(_.Z,{className:"modal_input_textfield",fullWidth:!0,variant:"filled",type:"text",label:e("store_name"),onBlur:l,onChange:o,value:n.name,name:"name",error:!!t.name&&!!i.name,helperText:t.name&&i.name,sx:{margin:"0 1rem 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px",color:"black"}}),(0,$.jsx)(_.Z,{className:"modal_input_textfield",fullWidth:!0,variant:"filled",type:"text",label:e("intro"),onBlur:l,onChange:o,value:n.intro,name:"intro",error:!!t.intro&&!!i.intro,helperText:t.intro&&i.intro,sx:{margin:"0 1rem 0rem 0",backgroundColor:a.primary[400],borderRadius:"5px",color:"black"}}),(0,$.jsx)(E.ZP,{className:"places_autocomplete",value:ue,onChange:xe,onSelect:ve,children:function(r){var n=r.getInputProps,i=r.suggestions,t=r.getSuggestionItemProps,l=r.loading;return(0,$.jsxs)("div",{children:[(0,$.jsx)(_.Z,(0,w.Z)({className:"modal_input_textfield",fullWidth:!0,label:e("search_location"),variant:"filled",type:"text",sx:{margin:"1rem 0",backgroundColor:a.primary[400],borderRadius:"5px",color:"black"}},n({placeholder:"\u641c\u7d22\u5e97\u9762\u5730\u9ede ...",className:"location-search-input"}))),(0,$.jsxs)("div",{className:"autocomplete-dropdown-container",children:[l&&(0,$.jsx)("div",{children:"Loading..."}),i.map((function(e,r){var n=e.active?"suggestion-item--active":"suggestion-item",i=e.active?{backgroundColor:a.primary[500],color:a.grey[300],cursor:"pointer",borderRadius:"5px",fontSize:"1rem",padding:"0.5rem",margin:"0.5rem"}:{backgroundColor:a.primary[400],color:a.grey[300],cursor:"pointer",borderRadius:"5px",fontSize:"1rem",padding:"0.5rem",margin:"0.5rem"};return(0,$.jsx)("div",(0,w.Z)((0,w.Z)({},t(e,{className:n,style:i})),{},{children:(0,$.jsx)("span",{children:e.description})}),r)}))]})]})}}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsxs)(m.Z,{sx:{minWidth:150,height:"100%"},children:[(0,$.jsx)(u.Z,{id:"demo-simple-select-label",children:e("county_filter")}),(0,$.jsx)(x.Z,{sx:{borderRadius:"10px",background:a.primary[400],height:"100%",width:"auto",mr:"1rem"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:Q,label:"cityFilter",onChange:de,required:!0,children:Object.keys(A).map((function(e,r){return(0,$.jsx)(h.Z,{value:e,children:e},"".concat(e,"-").concat(r))}))})]}),(0,$.jsxs)(m.Z,{sx:{minWidth:150,height:"100%"},children:[(0,$.jsx)(u.Z,{id:"demo-simple-select-label",children:e("district_filter")}),(0,$.jsx)(x.Z,{sx:{borderRadius:"10px",background:a.primary[400],height:"100%",width:"auto",mr:"1rem"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:te,label:"areaFilter",onChange:ce,required:!0,children:ee.map((function(e,r){return(0,$.jsx)(h.Z,{value:e,children:e},e)}))})]}),(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:e("address"),onBlur:l,onChange:o,value:be,name:"address",required:!0,error:!!t.address&&!!i.address,helperText:t.address&&i.address,sx:{marginBottom:"1rem",backgroundColor:a.primary[400],borderRadius:"5px"}})]}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:e("principal_name"),onBlur:l,onChange:o,value:n.principalName,name:e("principal_name"),error:!!t.principalName&&!!i.principalName,helperText:t.principalName&&i.principalName,sx:{margin:" 0 1rem 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px"}}),(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:e("principal_account"),onBlur:l,onChange:o,value:n.principalAccount,name:e("principal_account"),error:!!t.principalAccount&&!!i.principalAccount,helperText:t.principalAccount&&i.principalAccount,sx:{margin:" 0 1rem 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px"}}),(0,$.jsxs)(m.Z,{fullWidth:!0,variant:"filled",sx:{marginBottom:"1rem",backgroundColor:a.primary[400],borderRadius:"5px"},children:[(0,$.jsx)(u.Z,{htmlFor:"filled-adornment-password",children:"".concat(e("principal_password"))}),(0,$.jsx)(S.Z,{onBlur:l,onChange:o,value:n.principalPassword,name:"principalPassword",error:!!t.principalPassword&&!!i.principalPassword,type:j?"text":"password",endAdornment:(0,$.jsx)(k.Z,{position:"end",children:(0,$.jsx)(N.Z,{"aria-label":"toggle password visibility",onClick:P,onMouseDown:B,edge:"end",children:j?(0,$.jsx)(z.Z,{}):(0,$.jsx)(M.Z,{})})})}),(0,$.jsx)(R.Z,{error:!!t.principalPassword&&!!i.principalPassword,children:t.principalPassword&&i.principalPassword})]})]}),(0,$.jsxs)(p.Z,{display:"flex",children:[(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:e("principal_email"),onBlur:l,onChange:o,value:n.principalEmail,name:"principalEmail",error:!!t.principalEmail&&!!i.principalEmail,helperText:t.principalEmail&&i.principalEmail,sx:{margin:" 0 1rem 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px"}}),(0,$.jsx)(_.Z,{fullWidth:!0,variant:"filled",type:"text",label:e("principal_line"),onBlur:l,onChange:o,value:n.principalLineUrl,name:"principalLineUrl",error:!!t.principalLineUrl&&!!i.principalLineUrl,helperText:t.principalLineUrl&&i.principalLineUrl,sx:{margin:" 0 0 1rem 0",backgroundColor:a.primary[400],borderRadius:"5px"}})]})]}),(0,$.jsx)(p.Z,{display:"flex",justifyContent:"center",children:(0,$.jsx)(p.Z,{display:"flex",justifyContent:"center",children:(0,$.jsx)("button",{className:"my-button",type:"submit",children:O})})})]})}})})})]})]})}var de=a(70207),ce=function(){var e,r=(0,V.v9)((function(e){return e.entity})).entityName,a=(0,G.$G)().t,n=(0,c.Z)(),l=(0,b.TV)(n.palette.mode),y=(0,t.useState)(""),C=(0,i.Z)(y,2),w=C[0],_=(C[1],(0,t.useState)("")),S=(0,i.Z)(_,2),k=S[0],N=S[1],R=(0,t.useRef)(""),W=(0,t.useRef)(""),P=(0,t.useState)(10),I=(0,i.Z)(P,2),E=I[0],B=I[1],q=(0,t.useState)(0),A=(0,i.Z)(q,2),L=A[0],U=A[1],T=function(e){var r=e.limit,a=e.offset;B(r),U(a)},z=function(e,r){var a=r;return e.filter((function(e){return e.brand.name.match(new RegExp(a,"g"))}))},M=function(e,r){console.log(e,r),console.log();var a=r;return e.filter((function(e){return e.name.match(new RegExp(a,"g"))}))};switch(r){case"company":e=d.lu;break;case"brand":e=le.ub;break;case"store":e=de.Q}var O=(0,s.a)(e,{variables:{limit:E,offset:L}}),J=O.loading,Q=O.error,K=O.data,X=(0,t.useState)([]),Y=(0,i.Z)(X,2),ee=Y[0],re=Y[1],ae=(0,t.useState)([]),oe=(0,i.Z)(ae,2),ce=oe[0],pe=oe[1];return(0,t.useEffect)((function(){if(K)switch(r){case"company":pe(K.managerGetStores),re(K.managerGetStores);break;case"brand":pe(K.getBrandPrincipal.brands[0].managerGetStores),re(K.getBrandPrincipal.brands[0].managerGetStores);break;case"store":pe(K.getStorePrincipal.stores),re(K.getStorePrincipal.stores)}}),[K,L]),(0,t.useEffect)((function(){}),[K]),J?(0,$.jsx)(F.Z,{}):Q?(0,$.jsx)(D.Z,{}):(0,$.jsxs)(p.Z,{p:2,position:"flex",flexDirection:"column",children:[(0,$.jsx)(p.Z,{height:"10%",children:(0,$.jsx)("h1",{className:"userManagement_title",children:a("store_management")})}),(0,$.jsxs)(p.Z,{className:"flex_media",marginBottom:"2rem",height:"10%",alignItems:"center",children:[(0,$.jsx)(p.Z,{display:"flex",backgroundColor:l.primary[400],borderRadius:"10px",height:"52px",maxWidth:140,children:(0,$.jsx)(Z.ZP,{sx:{textTransform:"capitalize",ml:2,pr:2},placeholder:"".concat(a("brand_management")," ").concat(a("or")," ").concat(a("store_management")),inputRef:R})}),(0,$.jsxs)(m.Z,{sx:{width:120},children:[(0,$.jsx)(u.Z,{id:"demo-simple-select-label",children:a("county_filter")}),(0,$.jsx)(x.Z,{sx:{borderRadius:"10px",background:l.primary[400],height:"100%",width:"auto"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:k,label:"cityFilter",onChange:function(e){N(e.target.value)},children:v.yg.map((function(e,r){return(0,$.jsx)(h.Z,{value:e.name,children:e.name},"".concat(e.id,"-").concat(r))}))})]}),(0,$.jsxs)(g.Z,{sx:{backgroundColor:l.primary[300],color:l.grey[100],minWidth:"120px",height:"52px",borderRadius:"10px",":hover":{bgcolor:l.primary[300],border:"1px solid white"}},onClick:function(){console.log(R.current.value+" "+W.current.value+w+k);var e=R.current.value,r=W.current.value;if(e.length>2&&0===r.length){var a=z(ce,e);pe(a)}else if(0===e.length&&r.length>2){var n=M(ce,r);pe(n)}else pe(ee)},children:[(0,$.jsx)(j.Z,{sx:{mr:"10px",fontsize:".8rem",color:"white"}}),(0,$.jsx)(f.Z,{color:"white",variant:"h5",fontWeight:"500",children:a("search")})]}),(0,$.jsx)(p.Z,{display:"flex",backgroundColor:l.primary[400],borderRadius:"10px",marginLeft:"auto",padding:"0",height:"52px",children:"company"===r?(0,$.jsx)(ne,{}):"brand"===r?(0,$.jsx)(se,{}):null})]}),(0,$.jsxs)(p.Z,{backgroundColor:l.primary[400],borderRadius:"10px",height:"50%",children:[(0,$.jsxs)(p.Z,{display:"flex",justifyContent:"center",borderBottom:"0px solid ".concat(l.primary[500]),colors:l.grey[100],p:"15px",children:[(0,$.jsx)(p.Z,{width:"90%",children:(0,$.jsx)(ie.Z,{limit:E,offset:L,onPageChange:T})}),(0,$.jsx)(p.Z,{width:"10%",children:(0,$.jsx)(te.Z,{limit:E,offset:L,onPageChange:T})})]}),(0,$.jsxs)(p.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"4px solid ".concat(l.primary[500]),colors:l.grey[100],p:"10px",children:[(0,$.jsx)(p.Z,{width:"15%",display:"flex",alignItems:"center",justifyContent:"center",children:(0,$.jsx)(f.Z,{color:l.grey[100],variant:"h5",fontWeight:"500",children:a("store_name")})}),(0,$.jsx)(p.Z,{width:"15%",display:"flex",alignItems:"center",justifyContent:"center",children:(0,$.jsx)(f.Z,{color:l.grey[100],variant:"h5",fontWeight:"500",children:a("status")})}),(0,$.jsx)(p.Z,{width:"15%",display:"flex",alignItems:"center",justifyContent:"center",children:(0,$.jsx)(f.Z,{color:l.grey[100],variant:"h5",fontWeight:"500",children:a("products")})}),(0,$.jsx)(p.Z,{width:"15%",display:"flex",alignItems:"center",justifyContent:"center",children:(0,$.jsx)(f.Z,{color:l.grey[100],variant:"h5",fontWeight:"500",children:a("machine")})}),(0,$.jsx)(p.Z,{width:"15%",display:"flex",alignItems:"center",justifyContent:"center",children:(0,$.jsx)(f.Z,{color:l.grey[100],variant:"h5",fontWeight:"500",children:a("details")})})]}),(0,$.jsx)(p.Z,{backgroundColor:l.primary[400],borderRadius:"10px",height:"100%",overflow:"auto",children:ce.map((function(e,r){return(0,$.jsxs)(p.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"3px solid ".concat(l.primary[500]),p:"10px",children:[(0,$.jsx)(p.Z,{width:"15%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",children:e.name}),(0,$.jsx)(p.Z,{width:"15%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",children:"disable"===e.status.name?(0,$.jsx)(f.Z,{variant:"h5",color:l.primary[100],sx:{margin:".5rem .5rem"},children:a("disable")}):"banned"===e.status.name?(0,$.jsx)(f.Z,{variant:"h5",color:l.redAccent[500],sx:{margin:".5rem .5rem"},children:a("banned")}):"removed"===e.status.name?(0,$.jsx)(f.Z,{variant:"h5",color:l.redAccent[500],sx:{margin:".5rem .5rem"},children:a("deleted")}):(0,$.jsx)(f.Z,{variant:"h5",color:l.greenAccent[500],sx:{margin:".5rem .5rem"},children:a("normal")})}),(0,$.jsx)(p.Z,{width:"15%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",children:(0,$.jsx)(o.rU,{to:"/commodity-management",state:{data:e},children:(0,$.jsx)(g.Z,{sx:{color:l.primary[100],border:"1px solid"+l.grey[200],borderRadius:"10px",fontSize:".9rem",padding:".5rem 1.5rem"},children:a("manage")})})}),(0,$.jsx)(p.Z,{width:"15%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",children:(0,$.jsx)(o.rU,{to:"/machine-management",state:{data:e},children:(0,$.jsx)(g.Z,{sx:{color:l.primary[100],border:"1px solid"+l.grey[200],borderRadius:"10px",fontSize:".9rem",padding:".5rem 1.5rem"},children:a("manage")})})}),(0,$.jsx)(p.Z,{width:"15%",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",children:(0,$.jsx)(H,{props:e})})]},"".concat(e.id,"-").concat(r))}))})]})]})}}}]);
//# sourceMappingURL=587.d5ab5913.chunk.js.map